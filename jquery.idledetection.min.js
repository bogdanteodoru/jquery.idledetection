/**
 *  JQuery Idle Detection.
 *  jQuery plugin that detects when user went idle based on mouse movement, window focus and document.hasFocus()
 *  About: Author
 *  Bogdan Teodoru (me@bogdanteodoru.com).
 *  About: Version
 *  1.0.0
 **/

!function(a){"use strict";"function"!=typeof document.hasFocus&&(document.hasFocus=function(){return!1});var b={idleCheckPeriod:6e4,trackEvents:"mousemove mousedown keydown keypress keyup submit change mouseenter scroll resize touchstart",onIdle:a.noop(),onActive:a.noop(),onHide:a.noop(),onShow:a.noop(),onStatusChange:a.noop(),keepTracking:!0,idleStatus:!document.hasFocus()},c={lastCheckedTrackId:null},d={init:function(d){return c=a.extend({},b,c,d),k(this),g(),this.each(function(){c.lastCheckedTrackId=f(),a(this).on(c.trackEvents,function(a){c.lastCheckedTrackId=e()})})},destroy:function(){k(this)}},e=function(){if(c.idleStatus&&(c.onActive.call(),j(!1)),clearTimeout(c.lastCheckedTrackId),c.keepTracking)return f()},f=function(){var b,a=c.keepTracking?setInterval:setTimeout;return b=a(function(){j(!0),c.onIdle.call()},c.idleCheckPeriod)},g=function(){a(document).on("visibilitychange webkitvisibilitychange mozvisibilitychange msvisibilitychange",function(){return document.hidden||document.webkitHidden||document.mozHidden||document.msHidden?h():i()})},h=function(){c.onHide&&c.onHide.call(),j(!0)},i=function(){c.onShow&&c.onShow.call(),j(!1),c.lastCheckedTrackId=e()},j=function(a){c.onStatusChange?a!==c.idleStatus&&(c.idleStatus=a,c.onStatusChange.call(null,a)):c.idleStatus=a},k=function(b){a(b).off(c.trackEvents),c.keepTracking=!0,clearTimeout(c.lastCheckedTrackId)},l="idleDetection";a.fn[l]=function(b){return d[b]?d[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+"does not exist"):d.init.apply(this,arguments)}}(jQuery);