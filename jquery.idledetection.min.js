/**
 *  JQuery Idle Detection.
 *  jQuery plugin that detects when user went idle based on mouse movement, window focus and document.hasFocus()
 *  About: Author
 *  Bogdan Teodoru (me@bogdanteodoru.com).
 *  About: Version
 *  1.0.0
 **/

!function(a){"use strict";var b={idleCheckPeriod:6e4,windowCheckPeriod:1e4,trackEvents:"mousemove mousedown keydown keypress keyup submit change mouseenter scroll resize touchstart",onIdle:a.noop(),onActive:a.noop(),onHide:a.noop(),onShow:a.noop(),keepTracking:!0,idleStatus:!1},c={lastCheckedTrackId:null,windowCheckTimer:null,windowActiveStatus:!1},d={init:function(d){return c=a.extend({},b,c,d),k(this),g(),this.each(function(){c.lastCheckedTrackId=f(),a(this).on(c.trackEvents,function(a){c.lastCheckedTrackId=e()})})},destroy:function(){k(this)}},e=function(){if(c.idleStatus&&(c.onActive.call(),c.idleStatus=!1),clearTimeout(c.lastCheckedTrackId),c.keepTracking)return f()},f=function(){var b,a=c.keepTracking?setInterval:setTimeout;return b=a(function(){c.idleStatus=!0,c.onIdle.call()},c.idleCheckPeriod)},g=function(){c.windowCheckTimer=setInterval(function(){h()},c.windowActiveStatus)},h=function(){document.hasFocus()?j():i(),a(document).on("visibilitychange webkitvisibilitychange mozvisibilitychange msvisibilitychange",function(){return document.hidden||document.webkitHidden||document.mozHidden||document.msHidden?i():j()}),a(window).on("blur",i).on("focus",j)},i=function(){c.onHide&&c.onHide.call(),c.windowActiveStatus&&(c.windowActiveStatus=!1)},j=function(){c.onShow&&c.onShow.call(),c.windowActiveStatus||(c.windowActiveStatus=!0),c.lastCheckedTrackId=e()},k=function(b){a(b).off(c.trackEvents),a(window).off("visibilitychange webkitvisibilitychange mozvisibilitychange msvisibilitychange blur focus"),c.keepTracking=!0,clearTimeout(c.lastCheckedTrackId),clearTimeout(c.windowCheckTimer)},l="idleDetection";a.fn[l]=function(b){return d[b]?d[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+"does not exist"):d.init.apply(this,arguments)}}(jQuery);